import sys
from flask import Flask, request
from flask_restful import Resource, Api
from toolz import merge

from api.algorithm.result import get_result

app = Flask(__name__)
api = Api(app)


class PageExtractor(Resource):
    def get(self):
        json_dummy = { "text": "Dieses Gefühl, wenn man kurz bevor es zum Konzert geht, noch schnell den Wochenrückblick fertig machen muss. Deshalb heute ganz kurz und bündig: Hier sind unsere News der Woche. Heute besonders poplastig! David Guetta & Sia – Flames 2011 kreierte David Guetta in Zusammenarbeit mit Sia den Hit „Titanium“, der wochenlang die Charts und Clubs dominierte. Mit „Flames“ haben die beiden einen neuen Track der Zusammenarbeit veröffentlicht und knüpfen damit an alte Erfolgsmuster an. „Flames“ kann mit einer herausragenden Stimme seitens Sia überzeugen, bleibt im Ohr und hat ist sehr schön rhythmisch. Ein eingängiger Pop-Sound untermalt das Ganze und schafft einen sehr radiotauglichen Track. (Alina) Die Fantastischen Vier feat. Clueso – Zusammen Auch die Fantastischen Vier sind ab dem 27. April mit einem neuen Album zurück und haben sich für ihre dritte Singleauskopplung niemand anderes als Clueso mit ins Boot geholt. Mag man da zuerst denken, dass passt doch gar nicht zusammen, täuscht man sich gehörig. Die Fünf harmonieren sehr gut zusammen und schaffen ein sehr stimmiges Bild. Der Track macht Spaß, vereint all die guten Dinge sowohl von den Fantas als auch von Clueso. Besonders gut gelungen ist das Video zum Song. In diesem nehmen sich die Fantas gehörig selber auf die Schippe und schaffen so schon fast filmreife Szenen! (Alina) Frische Singer-Songwriter-Töne aus Island: Máni Orrason mit I Woke Up Waiting  In Island sind die Wintertage sehr dunkel. So wundert es kaum, dass auch die Thematiken auf dem neuesten Album von Máni Orrason nicht gerade freudestrahlend sind. Viel mehr nimmt uns der Musiker mit durch sein persönliches Tagebuch über Depressionen, Angststörung und Bulimie. Klingt schwer verdaulich, musikalisch verliert Orrason aber nie seine positive Einstellung. Zwischen Indie-Pop, Psych-Rock und klassischen Singer-Songwriter-Tönen erschafft Orrason so mit neun Songs den perfekten Ausklang für eine kalte Woche! (Julia) Shawn Mendes – In my Blood & Lost in Japan Shawn Mendes ist wieder da. Nach seinem riesen Erfolg mit den beiden Alben „Handwritten“ und „Illuminate“ meldet sich der Sänger mit gleich zwei neuen Songs zurück, die hoffentlich die Vorboten für ein drittes Studioalbum darstellen. Vor allem der Song „In my Blood“ geht direkt beim ersten Hören absolut ins Ohr, wirkt gefühlvoll und sehr ehrlich. Die Ballade vereint Shawn Mendes Gabe den Songs sehr authentisch Emotionen einzuhauchen, seine tolle Stimme und sehr gut akzentuierte Instrumente. Die Lyrics des Songs sind im Gegensatz zu vielen vorherigen Tracks zudem sehr persönlich. Der Song „Lost in Japan“ geht daneben etwas unter, ist deswegen aber noch nicht schlecht. Es handelt sich hierbei eher um eine Up-Beat Nummer, mit einigen Klaviereinlagen. Auch hier beweist Shawn Mendes wieder großes Talent. Wann sein drittes Album nun veröffentlicht wird, ist noch nicht bekannt, die beiden Tracks lassen auf jeden Fall aber schon einmal auf gutes hoffen! (Alina) Snow Patrol – Don’t Give In Sieben Jahre lang haben Snow Patrol keine Musik veröffentlicht. Am 25. Mai soll nun endlich ihr neues Studioalbum „Wildness“ herauskommen. Als Vorgeschmack dazu veröffentlichte die Band die erste Single aus dem Album mit dem Titel „Don’t Give In“. Die Musikpause hat sich definitiv gelohnt, denn „Don’t Give In“ ist sehr schön arrangiert und regt vor allem zum Nachdenken an. Die Lyrics des Songs sind gleichzeitig sehr poetisch und kraftvoll. Mit einem sehr dezenten Musikarrangement, sehr ehrlichen Worten und vielen Emotionen bleiben Snow Patrol sich und ihrem Stil treu, was den Song noch viel mehr Authentizität gibt. (Alina) Die Black Eyed Peas aus den Niederlanden  The Cool Quest mit VIVID!  Viele zucken vielleicht bei dem Namen der 2000er Erfolgsband zusammen. Aber die waren schließlich auch mal gut! Vielleicht aber nie so gut wie The Cool Quest, die jetzt mit dem zweiten Album so richtig durchstarten wollen. Als Liveband sind sie längst bekannt und sicherten sich so bei den Kritikerlieblingsfestival Eurosonic und dem Reeperbahn Festival Slots. Schon nach kurzem Reinhören in die Musik der Band versteht man schnell, wieso. Hip-Hop flirtet mit Pop, Soul und Rock-Riffs. Das alles vor dem Hintergrund von stets abwechlungsreichen Beats, ein Erfolgskonzept, das wahrscheinlich aufgehen wird! Die solltet ihr euch merken! (Julia) Die Bildrechte liegen bei Guesstimate und Phonic. * Mit \"*\" markierte Links sind Provisionslinks. Klickst du auf einen solchen Link, und kaufst auf der verlinkten Seite ein Produkt, erhält minutenmusik eine kleine Provision. Das ist eine gute Methode, unsere Arbeit zu unterstützen. Der Preis verändert sich dadurch für dich selbstverständlich nicht! Durch die weitere Nutzung der Seite stimmst du der Verwendung von Cookies zu. Weitere Informationen Akzeptieren Die Cookie-Einstellungen auf dieser Website sind auf \"Cookies zulassen\" eingestellt, um das beste Surferlebnis zu ermöglichen. Wenn du diese Website ohne Änderung der Cookie-Einstellungen verwendest oder auf \"Akzeptieren\" klickst, erklärst du sich damit einverstanden. Schließen", "date": "2018-03-25T18:17:39+02:00", "title": "Die Fantastischen Vier, Máni Orrason, Shaw Mendes, Snow Patrol, The Cool Quest - Wochenrückblick KW 12 2018 - minutenmusik.", "thumbnail": "http://minutenmusik.de/wp-content/uploads/2017/01/Foto-08.01.17-18-22-30-e1483906508322.jpg", "summary": "", "url": "http://minutenmusik.de/wochenrueckblick/die-fantastischen-vier-mani-orrason-shaw-mendes-snow-patrol-the-cool-quest-wochenrueckblick-kw-12-2018", "publication_date": "2018-03-25", "polarity": 0.22798923546691402, "sentiment": "Positive", "language": "de" }
        return json_dummy

    def post(self):
        url = request.form['url']
        result = get_result(url)
        return merge(result,
                     {'url': url})


api.add_resource(PageExtractor, '/extract')

if __name__ == '__main__':
    debug = True if len(sys.argv) > 1 else False
    print(f"\n ==== Starting page extractor demo API. Debug={debug} ====\n")
    app.run(debug=True)
